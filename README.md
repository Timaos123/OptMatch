# 1.基于线性规划解决两两配对问题

大致原理见知乎：[【模型工程】线性规划解决两两配对问题](https://zhuanlan.zhihu.com/p/348554373)

## 1.1.读取数据


```python
import  pandas as pd

teacherDf=pd.read_csv("data/teacher_info.csv")
teacherDf.head()
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>teacher_id</th>
      <th>major</th>
      <th>grade</th>
      <th>class</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>t1</td>
      <td>电包</td>
      <td>3</td>
      <td>1班</td>
    </tr>
    <tr>
      <th>1</th>
      <td>t2</td>
      <td>电包</td>
      <td>3</td>
      <td>2班</td>
    </tr>
    <tr>
      <th>2</th>
      <td>t3</td>
      <td>电包</td>
      <td>3</td>
      <td>3班</td>
    </tr>
    <tr>
      <th>3</th>
      <td>t4</td>
      <td>电商</td>
      <td>3</td>
      <td>4班</td>
    </tr>
    <tr>
      <th>4</th>
      <td>t5</td>
      <td>电商</td>
      <td>4</td>
      <td>5班</td>
    </tr>
  </tbody>
</table>
</div>




```python
studentDf=pd.read_csv("data/student_info.csv")
studentDf.head()
```




<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>student_id</th>
      <th>major</th>
      <th>grade</th>
      <th>class</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>s1</td>
      <td>电包</td>
      <td>1</td>
      <td>1班</td>
    </tr>
    <tr>
      <th>1</th>
      <td>s2</td>
      <td>电包</td>
      <td>1</td>
      <td>2班</td>
    </tr>
    <tr>
      <th>2</th>
      <td>s3</td>
      <td>电包</td>
      <td>3</td>
      <td>3班</td>
    </tr>
    <tr>
      <th>3</th>
      <td>s4</td>
      <td>电商</td>
      <td>3</td>
      <td>4班</td>
    </tr>
    <tr>
      <th>4</th>
      <td>s5</td>
      <td>电商</td>
      <td>2</td>
      <td>5班</td>
    </tr>
  </tbody>
</table>
</div>



## 1.2.构建带权邻接矩阵


```python
import numpy as np
from OptMatch import matchLinearAdj

studentInfoList=studentDf.values.tolist()
teacherInfoList=teacherDf.values.tolist()
adjMat=np.matrix([[abs(teacherInfoList[teacherI][2]-studentInfoList[studentI][2]) for teacherI in range(len(teacherInfoList))] for studentI in range(len(studentInfoList))])
rx,result,status=matchLinearAdj(adjMat)
```

## 1.3.输出结果


```python
pairList=[]
for xItem in rx:
    rowI=int(xItem.split("_")[1])
    colI=int(xItem.split("_")[2])
    pairList.append([teacherInfoList[colI][0],studentInfoList[rowI][0]])
pairList=[eval(pairItem) for pairItem in list(set([str(pairItem) for pairItem in pairList]))]
print("决策变量（前5条）：\n",pairList[:5])
print("最终结果：",result)
print("解答状态：",status)
```

    决策变量：
     [['t5', 's8'], ['t24', 's5'], ['t11', 's21'], ['t4', 's1'], ['t11', 's20'], ['t10', 's17'], ['t8', 's8'], ['t12', 's22'], ['t15', 's9'], ['t5', 's4'], ['t23', 's17'], ['t6', 's14'], ['t13', 's8'], ['t16', 's14'], ['t18', 's22'], ['t23', 's9'], ['t15', 's16'], ['t17', 's12'], ['t3', 's21'], ['t3', 's8'], ['t7', 's18'], ['t1', 's24'], ['t23', 's10'], ['t5', 's23'], ['t13', 's11'], ['t9', 's1'], ['t10', 's8'], ['t8', 's23'], ['t23', 's12'], ['t2', 's20'], ['t14', 's23'], ['t21', 's12'], ['t14', 's1'], ['t17', 's5'], ['t22', 's24'], ['t15', 's5'], ['t7', 's2'], ['t2', 's16'], ['t21', 's4'], ['t9', 's8'], ['t22', 's17'], ['t1', 's2'], ['t2', 's21'], ['t12', 's19'], ['t4', 's6'], ['t20', 's20'], ['t20', 's6'], ['t1', 's17'], ['t6', 's7'], ['t11', 's24'], ['t8', 's4'], ['t7', 's19'], ['t24', 's16'], ['t20', 's4'], ['t2', 's5'], ['t17', 's13'], ['t3', 's18'], ['t15', 's23'], ['t13', 's9'], ['t16', 's9'], ['t17', 's21'], ['t14', 's24'], ['t14', 's4'], ['t6', 's10'], ['t1', 's19'], ['t21', 's17'], ['t18', 's18'], ['t11', 's3'], ['t7', 's20'], ['t18', 's4'], ['t1', 's15'], ['t22', 's9'], ['t3', 's13'], ['t3', 's17'], ['t20', 's13'], ['t1', 's13'], ['t22', 's2'], ['t8', 's11'], ['t20', 's5'], ['t19', 's13'], ['t7', 's8'], ['t6', 's23'], ['t13', 's2'], ['t10', 's15'], ['t14', 's21'], ['t7', 's3'], ['t2', 's6'], ['t21', 's14'], ['t22', 's7'], ['t10', 's23'], ['t16', 's21'], ['t1', 's1'], ['t20', 's24'], ['t17', 's9'], ['t18', 's14'], ['t16', 's2'], ['t14', 's6'], ['t17', 's7'], ['t10', 's13'], ['t19', 's2'], ['t18', 's12'], ['t24', 's4'], ['t13', 's16'], ['t23', 's19'], ['t6', 's24'], ['t13', 's15'], ['t20', 's9'], ['t6', 's2'], ['t2', 's15'], ['t11', 's12'], ['t22', 's10'], ['t19', 's18'], ['t8', 's3'], ['t12', 's21'], ['t18', 's6'], ['t15', 's12'], ['t10', 's20'], ['t24', 's17'], ['t12', 's23'], ['t16', 's13'], ['t21', 's13'], ['t12', 's17'], ['t22', 's21'], ['t19', 's21'], ['t15', 's22'], ['t5', 's20'], ['t7', 's17'], ['t9', 's18'], ['t2', 's11'], ['t2', 's3'], ['t24', 's12'], ['t17', 's22'], ['t23', 's6'], ['t24', 's7'], ['t6', 's11'], ['t8', 's21'], ['t24', 's11'], ['t9', 's21'], ['t11', 's10'], ['t2', 's23'], ['t3', 's14'], ['t21', 's3'], ['t20', 's15'], ['t19', 's17'], ['t17', 's8'], ['t2', 's8'], ['t19', 's16'], ['t9', 's19'], ['t7', 's1'], ['t11', 's22'], ['t16', 's7'], ['t23', 's11'], ['t8', 's7'], ['t6', 's20'], ['t9', 's16'], ['t5', 's2'], ['t17', 's3'], ['t11', 's13'], ['t5', 's11'], ['t17', 's14'], ['t15', 's20'], ['t15', 's10'], ['t6', 's22'], ['t11', 's23'], ['t12', 's12'], ['t19', 's14'], ['t11', 's2'], ['t15', 's14'], ['t3', 's24'], ['t5', 's7'], ['t1', 's7'], ['t14', 's20'], ['t4', 's3'], ['t24', 's6'], ['t23', 's22'], ['t3', 's20'], ['t24', 's19'], ['t20', 's18'], ['t22', 's20'], ['t23', 's24'], ['t6', 's21'], ['t7', 's10'], ['t3', 's7'], ['t11', 's17'], ['t19', 's12'], ['t4', 's9'], ['t8', 's9'], ['t14', 's19'], ['t10', 's14'], ['t23', 's2'], ['t19', 's4'], ['t4', 's7'], ['t5', 's16'], ['t17', 's4'], ['t19', 's3'], ['t20', 's22'], ['t11', 's6'], ['t19', 's5'], ['t21', 's9'], ['t1', 's14'], ['t21', 's23'], ['t17', 's1'], ['t4', 's4'], ['t1', 's22'], ['t5', 's12'], ['t1', 's6'], ['t18', 's19'], ['t23', 's13'], ['t12', 's14'], ['t23', 's18'], ['t15', 's6'], ['t11', 's7'], ['t14', 's13'], ['t13', 's7'], ['t4', 's22'], ['t6', 's9'], ['t3', 's4'], ['t10', 's5'], ['t10', 's1'], ['t24', 's23'], ['t16', 's8'], ['t20', 's23'], ['t12', 's11'], ['t4', 's12'], ['t5', 's24'], ['t19', 's11'], ['t11', 's14'], ['t18', 's3'], ['t6', 's19'], ['t12', 's2'], ['t12', 's6'], ['t9', 's9'], ['t24', 's15'], ['t21', 's15'], ['t9', 's5'], ['t3', 's11'], ['t16', 's24'], ['t17', 's6'], ['t19', 's19'], ['t5', 's19'], ['t5', 's9'], ['t2', 's9'], ['t12', 's15'], ['t15', 's18'], ['t7', 's11'], ['t14', 's2'], ['t13', 's13'], ['t15', 's2'], ['t9', 's23'], ['t4', 's11'], ['t5', 's14'], ['t23', 's21'], ['t19', 's20'], ['t6', 's16'], ['t10', 's11'], ['t19', 's22'], ['t6', 's1'], ['t17', 's20'], ['t3', 's9'], ['t16', 's6'], ['t20', 's8'], ['t19', 's10'], ['t17', 's23'], ['t16', 's18'], ['t13', 's22'], ['t18', 's16'], ['t12', 's4'], ['t11', 's8'], ['t16', 's11'], ['t19', 's9'], ['t23', 's1'], ['t18', 's10'], ['t18', 's8'], ['t2', 's1'], ['t5', 's22'], ['t11', 's1'], ['t13', 's1'], ['t12', 's9'], ['t23', 's4'], ['t4', 's18'], ['t8', 's20'], ['t12', 's7'], ['t15', 's1'], ['t4', 's17'], ['t24', 's3'], ['t4', 's14'], ['t3', 's16'], ['t18', 's11'], ['t3', 's12'], ['t21', 's2'], ['t16', 's3'], ['t1', 's20'], ['t15', 's7'], ['t5', 's1'], ['t18', 's24'], ['t8', 's17'], ['t6', 's12'], ['t20', 's19'], ['t24', 's13'], ['t20', 's17'], ['t13', 's18'], ['t8', 's6'], ['t9', 's13'], ['t21', 's24'], ['t3', 's22'], ['t1', 's21'], ['t2', 's13'], ['t1', 's23'], ['t1', 's4'], ['t10', 's6'], ['t9', 's17'], ['t10', 's4'], ['t14', 's11'], ['t9', 's20'], ['t22', 's3'], ['t13', 's23'], ['t2', 's14'], ['t21', 's11'], ['t22', 's13'], ['t4', 's2'], ['t16', 's4'], ['t6', 's18'], ['t13', 's21'], ['t20', 's16'], ['t8', 's5'], ['t2', 's18'], ['t7', 's9'], ['t13', 's19'], ['t8', 's15'], ['t4', 's5'], ['t17', 's15'], ['t9', 's15'], ['t21', 's18'], ['t3', 's2'], ['t10', 's10'], ['t23', 's15'], ['t3', 's15'], ['t7', 's4'], ['t6', 's4'], ['t24', 's21'], ['t23', 's16'], ['t7', 's15'], ['t2', 's2'], ['t22', 's5'], ['t5', 's6'], ['t23', 's7'], ['t11', 's16'], ['t18', 's20'], ['t7', 's21'], ['t10', 's21'], ['t2', 's19'], ['t10', 's2'], ['t16', 's22'], ['t14', 's8'], ['t18', 's17'], ['t16', 's16'], ['t24', 's18'], ['t22', 's6'], ['t16', 's5'], ['t23', 's3'], ['t21', 's5'], ['t14', 's16'], ['t14', 's22'], ['t13', 's24'], ['t7', 's16'], ['t22', 's12'], ['t5', 's17'], ['t8', 's10'], ['t4', 's20'], ['t9', 's6'], ['t15', 's19'], ['t14', 's18'], ['t8', 's2'], ['t14', 's10'], ['t10', 's12'], ['t12', 's16'], ['t12', 's5'], ['t9', 's11'], ['t4', 's23'], ['t7', 's23'], ['t9', 's3'], ['t1', 's9'], ['t8', 's22'], ['t9', 's7'], ['t18', 's2'], ['t16', 's10'], ['t12', 's20'], ['t14', 's7'], ['t4', 's10'], ['t22', 's23'], ['t17', 's19'], ['t6', 's3'], ['t9', 's10'], ['t14', 's14'], ['t20', 's12'], ['t14', 's5'], ['t12', 's13'], ['t19', 's15'], ['t12', 's10'], ['t21', 's10'], ['t20', 's21'], ['t20', 's14'], ['t16', 's19'], ['t7', 's14'], ['t1', 's16'], ['t8', 's14'], ['t19', 's1'], ['t15', 's8'], ['t23', 's8'], ['t21', 's8'], ['t8', 's13'], ['t13', 's5'], ['t13', 's17'], ['t10', 's7'], ['t22', 's14'], ['t17', 's10'], ['t18', 's13'], ['t9', 's2'], ['t22', 's22'], ['t13', 's12'], ['t14', 's12'], ['t11', 's11'], ['t2', 's17'], ['t5', 's18'], ['t10', 's16'], ['t4', 's21'], ['t4', 's16'], ['t2', 's12'], ['t14', 's3'], ['t11', 's4'], ['t12', 's8'], ['t10', 's9'], ['t4', 's13'], ['t22', 's16'], ['t17', 's16'], ['t23', 's20'], ['t2', 's24'], ['t12', 's1'], ['t22', 's15'], ['t20', 's11'], ['t18', 's15'], ['t4', 's19'], ['t22', 's4'], ['t5', 's13'], ['t5', 's5'], ['t22', 's19'], ['t23', 's14'], ['t8', 's1'], ['t13', 's4'], ['t19', 's6'], ['t1', 's11'], ['t6', 's6'], ['t7', 's12'], ['t24', 's2'], ['t15', 's4'], ['t21', 's7'], ['t23', 's23'], ['t14', 's17'], ['t13', 's10'], ['t10', 's19'], ['t22', 's11'], ['t15', 's21'], ['t17', 's2'], ['t21', 's1'], ['t15', 's24'], ['t2', 's4'], ['t15', 's15'], ['t5', 's15'], ['t8', 's16'], ['t21', 's20'], ['t19', 's7'], ['t11', 's9'], ['t2', 's10'], ['t17', 's11'], ['t18', 's21'], ['t16', 's15'], ['t4', 's8'], ['t6', 's8'], ['t24', 's22'], ['t1', 's10'], ['t5', 's10'], ['t16', 's20'], ['t5', 's3'], ['t6', 's13'], ['t2', 's22'], ['t7', 's5'], ['t24', 's1'], ['t19', 's23'], ['t3', 's23'], ['t2', 's7'], ['t22', 's1'], ['t16', 's17'], ['t11', 's18'], ['t18', 's23'], ['t16', 's1'], ['t21', 's21'], ['t3', 's10'], ['t10', 's18'], ['t24', 's9'], ['t13', 's20'], ['t9', 's22'], ['t4', 's24'], ['t9', 's4'], ['t13', 's14'], ['t22', 's8'], ['t5', 's21'], ['t20', 's3'], ['t6', 's15'], ['t17', 's18'], ['t21', 's16'], ['t7', 's22'], ['t10', 's24'], ['t16', 's12'], ['t3', 's3'], ['t11', 's5'], ['t7', 's6'], ['t13', 's6'], ['t21', 's19'], ['t13', 's3'], ['t10', 's3'], ['t11', 's15'], ['t10', 's22'], ['t15', 's17'], ['t24', 's10'], ['t19', 's8'], ['t12', 's18'], ['t14', 's9'], ['t6', 's5'], ['t11', 's19'], ['t17', 's17'], ['t24', 's20'], ['t21', 's22'], ['t20', 's2'], ['t7', 's24'], ['t1', 's18'], ['t20', 's10'], ['t9', 's14'], ['t24', 's14'], ['t12', 's24'], ['t9', 's24'], ['t24', 's8'], ['t15', 's11'], ['t14', 's15'], ['t6', 's17'], ['t1', 's5'], ['t3', 's19'], ['t3', 's5'], ['t18', 's7'], ['t1', 's8'], ['t18', 's1'], ['t8', 's18'], ['t3', 's1'], ['t20', 's7'], ['t22', 's18'], ['t8', 's24'], ['t19', 's24'], ['t12', 's3'], ['t21', 's6'], ['t4', 's15'], ['t8', 's19'], ['t9', 's12'], ['t16', 's23'], ['t15', 's13'], ['t7', 's7'], ['t18', 's9'], ['t24', 's24'], ['t7', 's13'], ['t17', 's24'], ['t18', 's5'], ['t3', 's6'], ['t20', 's1'], ['t1', 's12'], ['t15', 's3'], ['t23', 's5'], ['t8', 's12'], ['t1', 's3']]
    最终结果： 44.0
    解答状态： 1
```
